//------------------------------------------------------------------------------
// Note : BASE ADV SYSTEM
// Data : 2011/02/22
// File : TitleObject.tjs
// Creator : Kazuyuki Uchino
// Memo :Title Object
//------------------------------------------------------------------------------
@if (__TITLEOBJECT_TJS__== 0)
@set(__TITLEOBJECT_TJS__ = 1)

class _TITLEOBJECT extends BaseObject {
	
	/*-----------------------------------------
	¡ô ¥Ñ¥é¥á©`¥¿
	-----------------------------------------*/
	
	var BaseBgLayer;			//±³¾°¥ì¥¤¥ä
	
	var BaseBordLayer;			//¥Ù©`¥¹¥Ü©`¥É
	
	var SpecialBgLayer;			//¥¹¥Ú¥·¥ã¥ë±³¾°
	
	var TrialLogoLayer;			//¥È¥é¥¤¥¢¥ë¥í¥´¥ì¥¤¥ä
	
	var PartsLayer;				//¥Ñ©`¥Ä¥ì¥¤¥ä
	
	var PartsLayer2;			//¥Ñ©`¥Ä¥ì¥¤¥ä
	
	var MapReg;					//MAP·¬ºÅ
	
	var TempReg;				//Temp
	
	var FinalizeFlag;			//Ï÷³ý¥Õ¥é¥°
	
	var ButtonLayer = [];		//¥Ü¥¿¥ó¥ì¥¤¥ä
	
	var LoadDataFlag;			//¥í©`¥É¥Ç©`¥¿´æÔÚ¥Õ¥é¥°
	
	var SpecialFlag;			//¥¹¥Ú¥·¥ã¥ëßx’k„IÀí
	
	var QuickDataFlag;			//Quick¥Ç©`¥¿¥Õ¥é¥°
	
	var ContinueDataFlag;		//Continue¥Ç©`¥¿¥Õ¥é¥°
	
	var QuickDataBord;			//Quick¥Ç©`¥¿¥Ü©`¥É
	
	var ContinueDataBord;		//Continue¥Ç©`¥¿¥Ü©`¥É
	
	var Quickfile;				//QuickFile
	
	var QuickThum;				//Quick Thumbnail
	
	var QuickText;				//Quick Text
	
	var QuickTime;				//Quick Time
	
	var QuickNum;				//Quick Number
	
	var ContinueThum;			//Continue Thumbnail
	
	var ContinueText;			//Continue Text
	
	var ContinueTime;			//Continue Time
	
	var ContinueNum;			//Continue Number
	
	var QuickRewrite;			//QUICKÔÙÃè»­¥Õ¥é¥°
	
	var BgLayer;				//±³¾°¥ì¥¤¥ä
	
	
	
	
	var m_left;					//mouse left
	
	var m_top;					//mouse top
	
	var keyactive;				//key active
	
	var ReturnReplayFlag;		//¥ê¥¿©`¥ó¥ê¥×¥ì¥¤¥Õ¥é¥°
	
	var ReturnExtraMode;		//¥ê¥¿©`¥ó£Å£Ø£Ô£Ò£Á¥Õ¥é¥°
	
	
	@if(_DEBUG == 1)
	var DebugObj;				//¥Ç¥Ð¥Ã¥°¥ª¥Ö¥¸¥§¥¯¥È
	@endif
	
	
	//¥¹¥¯¥í©`¥ëÔO¶¨
	var nRIGHT_POS  = 1200;
	var nLEFT_POS   = 80;
	var nBOTTOM_POS = 645;
	var nTOP_POS    = 640;
	
	var nSCROLL_SPD = 5;
	
	
	
	
	/*-----------------------------------------
	¡ô ¥³¥ó¥¹¥È¥é¥¯¥¿
	-----------------------------------------*/
	function _TITLEOBJECT(wnd, pri)
	{
		super.BaseObject(wnd, pri);
		
	}
	
	
	
	
	
	
	/*-----------------------------------------
	¡ô ¥Ç¥¹¥È¥é¥¯¥¿
	-----------------------------------------*/
	function finalize()
	{
		FinalizeFlag = true;
		
		invalidate BaseBgLayer;
		
		invalidate PartsLayer;
		
		invalidate PartsLayer2;
		
		for(var i=0; i<ButtonLayer.count; i++){
			invalidate ButtonLayer[i];
		}
		
		invalidate BaseBordLayer;
		
		invalidate SpecialBgLayer;
		
		BaseBgLayer = void;
		
		PartsLayer  = void;
		
		if(QuickDataBord !== void)
		{
			invalidate QuickDataBord;	//Quick¥Ç©`¥¿¥Ü©`¥É
			
			invalidate QuickThum;		//Quick Thumbnail
			
			invalidate QuickText;		//Quick Text
			
			invalidate QuickTime;		//Quick Time
			
			invalidate QuickNum;
		}
		
		if(ContinueDataBord !== void)
		{
			invalidate ContinueDataBord;	//Continue¥Ç©`¥¿¥Ü©`¥É
			
			invalidate ContinueThum;		//Continue Thumbnail
			
			invalidate ContinueText;		//Continue Text
			
			invalidate ContinueTime;		//Continue Time
			
			invalidate ContinueNum;
		}
		
		QuickDataBord    = void;	//Quick¥Ç©`¥¿¥Ü©`¥É
		ContinueDataBord = void;	//Continue¥Ç©`¥¿¥Ü©`¥É
		QuickThum        = void;	//Quick Thumbnail
		QuickText        = void;	//Quick Text
		QuickTime        = void;	//Quick Time
		ContinueThum     = void;	//Continue Thumbnail
		ContinueText     = void;	//Continue Text
		ContinueTime     = void;	//Continue Time
		FinalizeFlag     = void;	//Ï÷³ý¥Õ¥é¥°¤ò¤Í¤«¤¹
		
		//¥¬¥Ù©`¥¸¤òŠÖÆµÄ¤Ë„Ó¤«¤¹
		System.doCompact();
	}
	
	
	
	
	
	
	/*-----------------------------------------
	¡ô »­Ãæ×÷³ÉévÊý
	-----------------------------------------*/
	function TitleCreate(type = false)
	{
		//±³¾°¥ì¥¤¥ä
		if(f.midnight == true){
			MainWnd.add(BaseBgLayer  = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 0,0,0,0,"frm_title03_01" ));
		}else{
			MainWnd.add(BaseBgLayer  = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 0,0,0,0,"frm_title02_01" ));
		}
		
		BaseBgLayer.absolute = nTITLELAYER;
		
		BaseBgLayer.loadProvinceImage("title_map.png");
		
		//¥Ñ©`¥Ä¥ì¥¤¥ä
		PartsLayer             = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 0, 0, 0, 0, "frm_title04");
		
		PartsLayer.visible     = false;
		
		
		//±³¾°¥ì¥¤¥ä¤Î²ÎÕÕ¤òÈ¡µÃ
		BgLayer = MainWnd.ImageObj.GetImageAdress( 0 );
		
		
		@if(_DEBUG == 1)
		if(System.getKeyState(VK_TAB)){
			s["game_clear"] = true;
		}
		@endif
		
		
		
		//¥Ü¥¿¥ó¥ì¥¤¥ä
		for(var i=0; i<11; i++){
			
			var x,y,srcx,srcy,wid,hei;
			
			switch(i){
			case 0:{//¤Ï¤¸¤á¤«¤é
				x = 180;
				y = 675;
				srcx=0;
				srcy=0;
				wid=114;
				hei=27;
			}break;
			case 1:{//¤Ä¤Å¤­¤«¤é
				x = 308;
				y = 675;
				srcx=114;
				srcy=0;
				wid=71;
				hei=27;
			}break;
			case 2:{//quick
				x = 393;
				y = 675;
				srcx=185;
				srcy=0;
				wid=159;
				hei=27;
			}break;
			case 3:{//continue
				x = 563;
				y = 674;
				srcx=344;
				srcy=0;
				wid=158;
				hei=27;
			}break;
			case 4:{//config
				x = 734;
				y = 674;
				srcx=502;
				srcy=0;
				wid=116;
				hei=28;
			}break;
			case 5:{//¤¹¤Ú¤·¤ã¤ë
				x = 863;
				y = 674;
				srcx=618;
				srcy=0;
				wid=116;
				hei=27;
			}break;
			case 6:{//½KÁË
				x = 1002;
				y = 674;
				srcx=734;
				srcy=0;
				wid=94;
				hei=28;
			}break;
			case 7:{//¤Ï¤¸¤Þ¤ê¤ÎÈÕ
				x = 15;
				y = 675;
				srcx=828;
				srcy=0;
				wid=136;
				hei=27;
			}break;
			case 8:{//£ã£ç¥â©`¥É
				x = 394;
				y = 675;
				srcx=964;
				srcy=0;
				wid=103;
				hei=27;
			}break;
			case 9:{//¥ê¥×¥ì¥¤¤â©`¤É
				x = 580;
				y = 674;
				srcx=1067;
				srcy=0;
				wid=115;
				hei=28;
			}break;
			case 10:{//¤¨¤¯¤¹¤È¤é
				x = 771;
				y = 674;
				srcx=1182;
				srcy=0;
				wid=115;
				hei=27;
			}break;
			
			}
			
			ButtonLayer[i]   = new BaseLayer(MainWnd, MainWnd.CaptureLayer, x, y, wid, hei);
			
			ButtonLayer[i].copyRect(0,0,PartsLayer,srcx,srcy,wid,hei);
			
			ButtonLayer[i].absolute = (BaseBgLayer.absolute+1) + i;
			
			ButtonLayer[i].visible  = true;
			
			//¥í©`¥É¥Ç©`¥¿¤¬Ÿo¤±¤ì¤Ð¥í©`¥É¤ÏÈû¤°
			if(i == 1){
				
				//¥»©`¥Ö¥Ç©`¥¿¥Á¥§¥Ã¥¯
				for(var t=nN_SAVENUM; t<nN_SAVELAST; t++){
					//¥Ç©`¥¿¤¬´æÔÚ¤·¤Æ¤¤¤¿¤é½KÁË
					if(ResourceCheck("savedata%03d.bmp".sprintf(t))){
						LoadDataFlag = true;
						break;
					}else{
						LoadDataFlag = false;
					}
				}
				
				//¥Ü¥¿¥ó¤òÈû¤°
				if(LoadDataFlag == false){
					ButtonLayer[i].copyRect(0,0,PartsLayer,srcx,hei*3,wid,hei);
				}
				
			}else if( i == 2 ){
			//QUICK ¥Á¥§¥Ã¥¯
				//QUICK¤Î×îÐÂ¤Ï¤Ò¤È¤ÄÇ°
				var new_quick = ((s["quick_number"] - 1) < 0) ? (nSAVE_PAGE_NUM-1) : (s["quick_number"]-1);
				
				//Continue ¥Á¥§¥Ã¥¯
				if(!ResourceCheck("savedata%03d.bmp".sprintf(nQ_SAVENUM+new_quick))){
					ButtonLayer[i].copyRect(0,0,PartsLayer,srcx,hei*3,wid,hei);
					QuickDataFlag = false;
				}else{
					
					QuickDataFlag = true;
					
					if(nQUICK_BORD_TYPE == 0){
						QuickDataBord = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 393,525,0,0, "frm_quickbord.png");
					}else{
						QuickDataBord = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 393,525,0,0, "frm_quickbord2.png");
					}
					
					Quickfile = "savedata%03d.bmp".sprintf(nQ_SAVENUM+new_quick);
					QuickThum = new BaseLayer(MainWnd, QuickDataBord,135,12,nTHUMBNAIL_W,nTHUMBNAIL_H);
					QuickThum.loadImages(Quickfile);
					
					//*
					//¥³¥á¥ó¥ÈÓÐ¤ê¤Î¤ß
					if(nQUICK_BORD_TYPE == 0){
						QuickText = new BaseLayer(MainWnd, QuickDataBord,327+nSAVE_XPOS,11+nSAVE_YPOS,225,nSAVETEXT_FONTSIZE*4);
						QuickText.font.face   = nSAVETEXT_FONTNAME;
						QuickText.font.height = nSAVETEXT_FONTSIZE;
					}
					//*/
					
					
					QuickTime = new BaseLayer(MainWnd, QuickDataBord,34,73 ,75,(nTIMESTAMP_FONTSIZE+nTIMESTAMP_GYOUKAN)*2);
					QuickTime.font.height = nTIMESTAMP_FONTSIZE;
					
					//Quick¥Í©`¥à¤È¥Ê¥ó¥Ð©`
					QuickNum  = new BaseLayer(MainWnd, QuickDataBord,31,29 ,75,25);
					
					//Quick¥Í©`¥à¤È¥Ê¥ó¥Ð©`
					QuickNum.fileCopyRect(0, 0, new FileLayer(MainWnd, PriLayer, "frm_quickname.png"), 0, 0, 75, 25);
					
					QuickNum.fileCopyRect(42, 3, new FileLayer(MainWnd, PriLayer, "frm_qnumber.png"), 0, 20*new_quick, 30, 20);
					
					//TEXT
					var text = s[Quickfile];
					
					//¥Ü©`¥É¤ËÈ¡µÃ¤·¤¿¥Ç©`¥¿¤ò•ø¤­Þz¤à
					MainWnd.DataBordWirte( QuickText, QuickTime, text );
					
					QuickDataBord.visible = false;
				}
				
			}else if( i == 3 ){
			//Continue ¥Á¥§¥Ã¥¯
				//Continue ¥Á¥§¥Ã¥¯
				if(!ResourceCheck("savedata%03d.bmp".sprintf(nC_SAVENUM))){
					ButtonLayer[i].copyRect(0,0,PartsLayer,srcx,hei*3,wid,hei);
					ContinueDataFlag = false;
				}else{
					ContinueDataFlag = true;
					
					if(nQUICK_BORD_TYPE == 0){
						ContinueDataBord = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 563, 525,0,0,"frm_quickbord.png");
					}else{
						ContinueDataBord = new BaseLayer(MainWnd, MainWnd.CaptureLayer, 563, 525,0,0,"frm_quickbord2.png");
					}
					
					var Continuefile = "savedata%03d.bmp".sprintf(nC_SAVENUM);
					ContinueThum     = new BaseLayer(MainWnd, ContinueDataBord,135,12,nTHUMBNAIL_W,nTHUMBNAIL_H);
					ContinueThum.loadImages(Continuefile);
					
					//¥³¥á¥ó¥ÈÓÐ¤ê¤Î¤ß
					//*
					if(nQUICK_BORD_TYPE == 0){
						ContinueText = new BaseLayer(MainWnd, ContinueDataBord,327+nSAVE_XPOS,11+nSAVE_YPOS,225,nSAVETEXT_FONTSIZE*4);
						ContinueText.font.face   = nSAVETEXT_FONTNAME;
						ContinueText.font.height = nSAVETEXT_FONTSIZE;
					}
					//*/
					
					
					
					ContinueTime = new BaseLayer(MainWnd, ContinueDataBord,34,73,75,(nTIMESTAMP_FONTSIZE+nTIMESTAMP_GYOUKAN)*2);
					ContinueTime.font.height = nTIMESTAMP_FONTSIZE;
					
					//Quick¥Í©`¥à¤È¥Ê¥ó¥Ð©`
					ContinueNum  = new BaseLayer(MainWnd, ContinueDataBord,31,29 ,75,25);
					
					//Quick¥Í©`¥à¤È¥Ê¥ó¥Ð©`
					ContinueNum.fileCopyRect(0, 0, new FileLayer(MainWnd, PriLayer, "frm_continuename.png"), 0, 0, 75, 25);
					
					//TEXT
					var text = s[Continuefile];
					
					//¥Ü©`¥É¤ËÈ¡µÃ¤·¤¿¥Ç©`¥¿¤ò•ø¤­Þz¤à
					MainWnd.DataBordWirte( ContinueText, ContinueTime, text );
					
					ContinueDataBord.visible = false;
				}
				
			}
			
			
			//¥¯¥ê¥¢¥Õ¥é¥°¤¬Ÿo¤±¤ì¤Ð¥¹¥Ú¥·¥ã¥ë¤ÏÈû¤°
			if(i == 5){
				SpecialFlag = false;
				
				if(s["game_clear"] == false){
					ButtonLayer[i].copyRect(0,0,PartsLayer,srcx,hei*3,wid,hei);
				}else{
					SpecialFlag = true;
				}
			}
			
			
			//ALL CLEAR¤Î¤È¤­¤Ï±íÊ¾
			if( (i == 7) && (s['ALL_CLEAR'] == false) ) {
				ButtonLayer[i].visible = false;
			}
			
			//¤Ï¤¸¤Þ¤ê¤ÎÈÕ¥Õ¥é¥°¤¬Á¢¤Æ¤Æ¤Ê¤±¤ì¤Ð·Ç±íÊ¾¤Ë¤¹¤ë
			if((i == 7) && nPROLOGU_PATCH == false){
				ButtonLayer[i].visible = false;
			}
			
			
			//CG MODE¤ÈREPLAY MODE ¤Ï×î³õ·ü¤»¤Æ¤ª¤¯
			if(7 < i){
				
				ButtonLayer[i].absolute = (nTITLELAYER+10) + i;
				
				ButtonLayer[i].visible = false;
			}
		}
		
		
		
		TempReg = 0;
		
		MapReg  = 0;
		
		//¥á¥Ã¥»©`¥¸Ïµ¤Î¥Ñ¥é¥á©`¥¿¤ò³õÆÚ»¯¤·¤Æ¤ª¤¯
		MainWnd.MessObj.logcnt     = 0;
		
		MainWnd.MessObj.lognum     = 0;
		
		MainWnd.MessObj.hitret_cnt = 0;
		
		//¥·¥Ê¥ê¥ª¥Õ¥é¥°¤ò¥¯¥ê¥¢¤¹¤ë
		//Data Clear
		for(var i=0; i<nSCENARIOFLAG; i++){
			var Index = "%d".sprintf(i);
			
			MainWnd.PaserObj.temp_f[Index] = 0;
			
			f[Index] = 0;
		}
		
		//ÏÈî^¥Ç©`¥¿¤ò¥¯¥ê¥¢¤·¤Æ¤ª¤¯
		(Dictionary.clear incontextof MainWnd.PaserObj.temp_f)();
		
		@if(_DEBUG == 1)
		//DEBUGÓÃ¤Î¥ì¥¸¥¹¥¿¤ò¥¯¥ê¥¢
		(Dictionary.clear incontextof debug_f)();
		@endif
		
		
		//¥ê¥×¥ì¥¤¥Õ¥é¥°¤òÇÞ¤«¤»¤ë
		ReturnReplayFlag = false;
		ReturnExtraMode  = false;
		//¥¨¥¯¥¹¥È¥é¥Õ¥é¥°¤òÇÞ¤«¤·¤Æ¤ª¤¯
		f["extra"]       = false;
		MainWnd.ExtraFlag= false;
		
		//LOG JUMP¥Ñ¥é¥á©`¥¿¤ò¥¯¥ê¥¢¤·¤Æ¤ª¤¯
		MainWnd.LogJumpObj.JumpParamClear();
		
		
		
		//REPLAY¥Õ¥¡¥¤¥ë¤«¤é‘ø¤Ã¤Æ¤­¤¿
		if(type == 1){
			//¥¹¥Ú¥·¥ã¥ëÓÃ¥¿¥¤¥È¥ë¤ËÇÐ¤êÌæ¤¨
			SpecialWork();
			MapReg           = 10;
			ReturnReplayFlag = true;
			ButtonWork();
		}else if(type == 2){
		//EXTRA
			//¥¹¥Ú¥·¥ã¥ëÓÃ¥¿¥¤¥È¥ë¤ËÇÐ¤êÌæ¤¨
			SpecialWork();
			MapReg           = 11;
			ReturnExtraMode  = true;
			ButtonWork();
		
		}else{
			//TITLE BGM ¤ò±£³Ö¤·¤Æ¤ª¤¯
			f["titlebgm"] = f["bgm"];
			//¥¯¥ê¥¢¤·¤Æ¤ª¤¯
			MainWnd.ReplayPage = 0;
			
			
			//¥Þ¥¦¥¹¥«©`¥½¥ë×Ô„ÓÒÆ„Ó
			/*
			if( s["mouse"] == true ){
				
				MainWnd.PrimaryLayer.cursorX = ButtonLayer[0].left + (ButtonLayer[0].width\2);
				
				MainWnd.PrimaryLayer.cursorY = ButtonLayer[0].top  + (ButtonLayer[0].height\2);
				
				//ÒÆ„Ó¥¢¥Ë¥á ¡ùÑÔ¤ï¤ì¤¿¤éÊ¹ÓÃ¤¹¤ë¤Ã¤Æ¤³¤È¤Ç
				//MainWnd.SetCursorMove( ButtonLayer[0].left + (ButtonLayer[0].width\2), ButtonLayer[0].top  + (ButtonLayer[0].height\2), nMOUSE_MOVE_TIME );
			}
			*/
		}
		
		
		//¥¨¥¯¥¹¥È¥é¥·¥Ê¥ê¥ª¥Õ¥é¥°´_ÕJ
		if(
			ResourceCheck(nEXTRAFILE01) || ResourceCheck(nEXTRAFILE02) || ResourceCheck(nEXTRAFILE03) ||
			ResourceCheck(nEXTRAFILE04) || ResourceCheck(nEXTRAFILE05) || ResourceCheck(nEXTRAFILE06) ||
			ResourceCheck(nEXTRAFILE07) || ResourceCheck(nEXTRAFILE08) || ResourceCheck(nEXTRAFILE09)
		){
			s["extra_flag"] = true;
		}else{
			//s["extra_flag"] = false;
		}
		
		
		
		//¥³¥ó¥Æ¥£¥Ë¥å©`¥Õ¥é¥°
		MainWnd.ContinueFlag = false;
		
	}
	
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö Default Func
	-----------------------------------------*/
	function DefaultAction()
	{
		for(var i=0; i<ButtonLayer.count; i++){
		
			if(ButtonLayer[i].PaintFlag){
				
				ButtonLayer[i].PaintFlag = false;
				
				Wait(nBUTTON_WAIT);
				
				ButtonWork();
				
				return;
			}
		}
		
		if(!keyactive){
		//mouse ÖÆÓù
			MapReg = BaseBgLayer.GetProvincePixel();
		}else{
		//key ÖÆÓù
			if(	(m_left != MainWnd.PrimaryLayer.cursorX) ||
				(m_top  != MainWnd.PrimaryLayer.cursorY)
			){
				keyactive = false;
			}
		}
		
		
		if(MapReg != TempReg)
		{
			ActionFunction();
			
			ClearFunction();
		}
		
		TempReg = MapReg;
		
		
		//¥«©`¥½¥ëÎ»ÖÃ¥Á¥§¥Ã¥¯
		CursorPosCheck(MainWnd.PrimaryLayer.cursorX, MainWnd.PrimaryLayer.cursorY);
		
	}
	
	
	
	
	
	
	/*-----------------------------------------
	¡ô¥¤¥Ù¥ó¥ÈÈ¡µÃévÊý
	
	ÒýÊý£º
	¤Ê¤·
	
	ÕhÃ÷£º
	Mouse Up¤ò„IÀí¤¹¤ë¥Ï¥ó¥É¥é
	
	-----------------------------------------*/
	function LeftMouseUpAction()
	{
		//×ó¥¯¥ê¥Ã¥¯ÅÅËû„IÀí
		if(
			(MainWnd.LoadFlag) ||
			(DeleteObject !== void) ||
			(MainWnd.EffectObj.LoadTrans) ||
			((MapReg == 11) && (!s["extra_flag"]))
		){
			return;
		}
		
		//¥¯¥ê¥Ã¥¯„IÀí
		ClickWork();
	}
	
	
	
	
	
	
	/*-----------------------------------------
	¡ô¥¤¥Ù¥ó¥ÈÈ¡µÃévÊý
	
	ÒýÊý£º
	¤Ê¤·
	
	ÕhÃ÷£º
	Mouse Up¤ò„IÀí¤¹¤ë¥Ï¥ó¥É¥é
	
	-----------------------------------------*/
	function RightMouseUpAction()
	{
		//¥¹¥Ú¥·¥ã¥ëÓÃ¤Î±³¾°¤¬±íÊ¾¤µ¤ì¤Æ¤¤¤ëˆöºÏ¤Ï¤³¤³¤Þ¤Ç
		if(ButtonLayer[8].visible){
			ButtonLayer[5].copyRect(0,0,PartsLayer,618,0,ButtonLayer[5].width,ButtonLayer[5].height);
			ButtonLayer[8].visible = false;
			ButtonLayer[9].visible = false;
			ButtonLayer[10].visible= false;
			MapReg                 = 0;
			TempReg                = 6;
			
			//Í¨³£ÓÃ¥Ü¥¿¥ó¤ò±íÊ¾¤¹¤ë
			for(var i=0; i<7; i++){
				ButtonLayer[i].visible = true;
			}
			
			
			if((s['ALL_CLEAR'] == true) && (nPROLOGU_PATCH == true)){
				ButtonLayer[7].visible = true;
			}
			
			//clipmap¤Î‰ä¸ü
			BaseBgLayer.loadProvinceImage("title_map.png");
			
			return;
		}
		
	}
	
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö ¥¢¥¯¥Æ¥£¥ÖévÊý
	
	ÒýÊý£º
	
	ÕhÃ÷£º
	
	-----------------------------------------*/
	function ActionFunction()
	{
		if(MapReg <= 0)return;
		
		switch(MapReg){
			case 1://start
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,0,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 2://load
				if((MapReg == 2) && (!LoadDataFlag))return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,114,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 3://quick
				if((MapReg == 3) && (!QuickDataFlag))return;
				//Quick±íÊ¾
				if(MapReg == 3)QuickDataBord.visible = true;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,185,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 4://continue
				if((MapReg == 4) && (!ContinueDataFlag))return;
				//Continue±íÊ¾
				if(MapReg == 4)ContinueDataBord.visible = true;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,344,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 5://config
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,502,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 6://special
				if((MapReg == 6) && (!SpecialFlag))return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,618,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 7://end
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,734,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 8://¤Ï¤¸¤Þ¤ê¤ÎÈÕ
				if(!ButtonLayer[MapReg-1].visible)return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,828,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 9://cg mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,964,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 10://replay mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1067,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 11:{//extra mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1182,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			}break;
		}
	}
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö ÏûÈ¥évÊý
	
	ÒýÊý£º
	
	ÕhÃ÷£º
	
	-----------------------------------------*/
	function ClearFunction()
	{
		switch(TempReg){
			case 1://start
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,0,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 2://load
				if((TempReg == 2) && (!LoadDataFlag))return;
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,114,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 3://quick
				if((TempReg == 3) && (!QuickDataFlag))return;
				//Quick·Ç±íÊ¾
				if(TempReg == 3)QuickDataBord.visible = false;
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,185,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 4://continue
				if((TempReg == 4) && (!ContinueDataFlag))return;
				//Continue·Ç±íÊ¾
				if(TempReg == 4)ContinueDataBord.visible = false;
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,344,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 5://config
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,502,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 6://special
				if((TempReg == 6) && (!SpecialFlag))return;
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,618,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 7://end
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,734,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 8://¤Ï¤¸¤Þ¤ê¤ÎÈÕ
				if(!ButtonLayer[TempReg-1].visible)return;
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,828,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 9://cg mode
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,964,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 10://replay mode
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,1067,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			break;
			case 11:{//extra mode
				ButtonLayer[TempReg-1].copyRect(0,0,PartsLayer,1182,0,ButtonLayer[TempReg-1].width,ButtonLayer[TempReg-1].height);
			}break;
		}
	}
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö ¥¯¥ê¥Ã¥¯„IÀí
	
	ÒýÊý£º
	
	ÕhÃ÷£º
	
	-----------------------------------------*/
	function ClickWork()
	{
		if(MapReg <= 0)return;
		
		switch(MapReg){
			case 1:{//start
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,0,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			}break;
			case 2://load
				if((MapReg == 2) && (!LoadDataFlag))return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,114,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 3://quick
				if((MapReg == 3) && (!QuickDataFlag))return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,185,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 4://continue
				if((MapReg == 4) && (!ContinueDataFlag))return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,344,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 5://config
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,502,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 6://special
				if((MapReg == 6) && (!SpecialFlag))return;
				
				@if(_DEBUG == 1)
				if(System.getKeyState(VK_TAB)){
					if(MapReg == 6)s["extra_flag"] = true;
				}
				@endif
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,618,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 7://end
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,734,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 8://¤Ï¤¸¤Þ¤ê¤ÎÈÕ
				if(!ButtonLayer[MapReg-1].visible)return;
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,828,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 9://cg mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,964,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 10://replay mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1067,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			break;
			case 11:{//extra mode
				ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1182,ButtonLayer[MapReg-1].height*2,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			}break;
		}
		
		
		//»­Ãæ¸üÐÂ
		ButtonLayer[(MapReg-1)].update();
	}
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö ¥Ü¥¿¥ó„IÀí
	-----------------------------------------*/
	function ButtonWork()
	{
		switch(MapReg){
		case 1://start
		case 8:{//¤Ï¤¸¤á¤«¤é
			
			if( MapReg == 1 ){
				f.changefile = 1;
			}else{
				f.changefile = 8;
			}
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			
			//¥³¥ó¥Æ¥£¥Ë¥å©`ÓÃSAVE¥Õ¥é¥°
			MainWnd.ContinueFlag = true;
			
			
			//Ï÷³ý„IÀí
			DeleteWork( TitleDelete );
			
		}break;
		
		case 2:{//load
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,114,ButtonLayer[MapReg-1].height,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			
			//SYSTEMÒôÉù¤ÎÔÙÉú
			if(s["system"] == true) {
				var file = nSYSTEM_VOICE_HEADER + getCharID(s["sys_char_id"]) + nSYS_LOADCALL;
				MainWnd.SystemVoicePlay(file);
			}
			
			//LOAD»­Ãæ¤ò×÷³É¤¹¤ë
			MainWnd.SaveLoadObj          = new _SAVELOADOBJECT(MainWnd, PriLayer, nLOAD_SC);
			
			//¥¢¥¯¥Æ¥£¥Ö¥ª¥Ö¥¸¥§¥¯¥È¤òLOAD¤Ë‰ä¸ü
			MainWnd.ChangeActive(MainWnd.SaveLoadObj);
			
			//¥¿¥¤¥Þ©`ÔÙé_
			MainWnd.DefaultTimer.enabled = true;
			
		}break;
		
		case 3:{//quick
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			//¥í©`¥ÉŒgÐÐ
			//£±¤ÄÇ°¤ÎÊý‚Ž¤¬×îÐÂ
			var now_new_quick = s["quick_number"] - 1;
			if(now_new_quick < 0)now_new_quick = nQ_SAVELAST-1;
			
			MainWnd.DataLoadAction(nQ_SAVENUM + now_new_quick);
			//LOAD„IÀí
			MainObj.LoadAction();
			
		}break;
		
		case 4:{//continue
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			//¥í©`¥ÉŒgÐÐ
			MainWnd.DataLoadAction(nC_SAVENUM);
			//LOAD„IÀí
			MainObj.LoadAction();
			
		}break;
		
		case 5:{//config
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,502,0,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			
			MapReg = 0;
			
			TempReg= 0;
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			
			//SYSTEMÒôÉù¤ÎÔÙÉú
			if(s["system"] == true) {
				var file = nSYSTEM_VOICE_HEADER + getCharID(s["sys_char_id"]) + nSYS_CONFIGCALL;
				MainWnd.SystemVoicePlay(file);
			}
			
			//CONFIG»­Ãæ¤ò×÷³É¤¹¤ë
			MainWnd.ConfigObj = new _CONFIGOBJECT(MainWnd, PriLayer, true);
			
			//¥¢¥¯¥Æ¥£¥Ö¥ª¥Ö¥¸¥§¥¯¥È¤òCONFIG¤Ë‰ä¸ü
			MainWnd.ChangeActive(MainWnd.ConfigObj);
			
			//¥¿¥¤¥Þ©`ÔÙé_
			MainWnd.DefaultTimer.enabled = true;
			
		}break;
		
		case 6:{//special
			
			//¥¿¥¤¥Þ©`Í£Ö¹
			MainWnd.DefaultTimer.enabled = false;
			
			//SYSTEMÒôÉù¤ÎÔÙÉú
			if(s["system"] == true) {
				var file = nSYSTEM_VOICE_HEADER + getCharID(s["sys_char_id"]) + nSYS_SPECIALCALL;
				MainWnd.SystemVoicePlay(file);
			}
			
			//¥¹¥Ú¥·¥ã¥ëÓÃ¥Ü¥¿¥ó¤ò±íÊ¾¤¹¤ë
			SpecialWork();
			
			//¥¿¥¤¥Þ©`ÔÙé_
			MainWnd.DefaultTimer.enabled = true;
			
		}break;
		
		case 7:{//end
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,734,0,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			
			//¥À¥¤¥¢¥í¥°¤ò±íÊ¾
			MainWnd.onCloseQuery(true);
			
		}break;
		
		case 9:{//cg mode
			
			
			
			MainWnd.CgReplayObj    = new _CGREPLAYMODE(MainWnd, PriLayer , nCGMODE_SC);
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,964,0,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);	
			
			//¥¹¥Ú¥·¥ã¥ëÓÃ¤Î±³¾°¤òÏû¤·¤Æ¤ª¤¯
			MapReg                 = 0;
			TempReg                = 9;
			
			return;
			
		}break;
		
		case 10:{//replay
			
			
			MainWnd.CgReplayObj = new _CGREPLAYMODE(MainWnd, PriLayer , nREPLAYMODE_SC , ReturnReplayFlag);
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1067,0,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			
			//¥¹¥Ú¥·¥ã¥ëÓÃ¤Î±³¾°¤òÏû¤·¤Æ¤ª¤¯
			MapReg                 = 0;
			TempReg                = 10;
			
			//¥Õ¥é¥°¤ò¤³¤³¤ÇÇÞ¤«¤·¤Æ¤ª¤¯
			ReturnReplayFlag = false;
			
			return;
			
		}break;
		case 11:{//extra
			
			//SYSTEMÒôÉù¤ÎÔÙÉú
			if(s["system"] == true) {
				var file = nSYSTEM_VOICE_HEADER + getCharID(s["sys_char_id"]) + nSYS_EXTRAMODE;
				MainWnd.SystemVoicePlay(file);
			}
			
			MainWnd.ExtraObj    = new _EXTRAOBJECT(MainWnd, PriLayer, ReturnExtraMode);
			
			ButtonLayer[MapReg-1].copyRect(0,0,PartsLayer,1182,0,ButtonLayer[MapReg-1].width,ButtonLayer[MapReg-1].height);
			
			MapReg                 = 0;
			TempReg                = 11;
			
			//SYS00_A00016.ogg extra¥·¥Ê¥ê¥ª
			ReturnExtraMode = false;
			
		}break;
		
		}
	}
	
	
	
	
	
	
	/*----------------------------------------------------------
	¡ö ¥¹¥Ú¥·¥ã¥ë»­ÃæÇÐ¤êÌæ¤¨„IÀí
	----------------------------------------------------------*/
	function SpecialWork()
	{
		//¥¹¥Ú¥·¥ã¥ëÓÃ¥Ü¥¿¥ó¤ò±íÊ¾¤¹¤ë
		for(var i=0; i<8; i++){
			ButtonLayer[i].visible = false;
		}
		
		//CG MODE & REPLAY MODE
		ButtonLayer[8].visible       = true;
		ButtonLayer[9].visible       = true;
		
		//¥¨¥¯¥¹¥È¥é¥Õ¥é¥°
		if(s["extra_flag"]){
			ButtonLayer[10].visible   = true;
		}
		
		ButtonLayer[8].copyRect(0,0,PartsLayer,964,0);
		
		ButtonLayer[9].copyRect(0,0,PartsLayer,1067,0);
		
		ButtonLayer[10].copyRect(0,0,PartsLayer,1182,0);
		
		//clipmap¤Î‰ä¸ü
		BaseBgLayer.loadProvinceImage("title_map2.png");
	}
	
	
	
	
	
	
	
	
	/*-----------------------------------------
	¡ö KEY UP
	-----------------------------------------*/
	function KeyUpAction(key, shift, process)
	{
		if(key == VK_CONTROL)return;
		
		switch(key){
			case VK_RETURN:{
			//return
			//alt¥­©`¤¬Ñº¤µ¤ì¤Æ¤¤¤¿¤é¤³¤³¤Þ¤Ç
			if(shift & ssAlt)return;
				LeftMouseUpAction();
			}break;
			
			case VK_LEFT:{
			//¡û
				
				keyactive = true;
				m_left    = MainWnd.PrimaryLayer.cursorX;
				m_top     = MainWnd.PrimaryLayer.cursorY;
				
				--MapReg;
				
				//¥¹¥Ú¥·¥ã¥ëÖÐ¤Î¤ß
				if(ButtonLayer[8].visible){
					if(MapReg < 1){
						MapReg = 9;
					}else if(MapReg < 9){
						MapReg = 11;
					}
				}else{
					if(MapReg < 1){
						MapReg = 8;
					}
				}
				
				
				//¥­©`¥¹¥­¥Ã¥×„IÀí
				switch(MapReg){
				case 11://extra
					if(s["extra_flag"] == false){ MapReg = 10; }
				break;
				case 8://Ê¼¤Þ¤ê¤ÎÈÕ
					if( (MapReg == 8) && ((!s['ALL_CLEAR']) || (!nPROLOGU_PATCH)) ){ MapReg = 7; }
				case 6://special
					if((MapReg == 6) && (!SpecialFlag)){ MapReg = 5; }
				case 4://continue
					if((MapReg == 4) && (!ContinueDataFlag)){ MapReg = 3; }
				case 3://quick
					if((MapReg == 3) && (!QuickDataFlag)){ MapReg = 2; }
				case 2://load
					if((MapReg == 2) && (!LoadDataFlag)){ MapReg = 1; }
				break;
				}
				
				
			}break;
			
			case VK_RIGHT:{
			//¡ú
				
				keyactive = true;
				m_left    = MainWnd.PrimaryLayer.cursorX;
				m_top     = MainWnd.PrimaryLayer.cursorY;
				
				++MapReg;
				
				//¥¹¥Ú¥·¥ã¥ëÖÐ¤Î¤ß
				if(ButtonLayer[8].visible){
					if(MapReg < 9){
						MapReg = 9;
					}else if(11 < MapReg){
						MapReg = 9;
					}
				}else{
					if(8 < MapReg){
						MapReg = 1;
					}else if(MapReg < 1){
						MapReg = 7;
					}
				}
				
				
				//¥­©`¥¹¥­¥Ã¥×„IÀí
				switch(MapReg){
				case 2://load
					if((MapReg == 2) && (!LoadDataFlag)){ MapReg = 3; }
				case 3://quick
					if((MapReg == 3) && (!QuickDataFlag)){ MapReg = 4; }
				case 4://continue
					if((MapReg == 4) && (!ContinueDataFlag)){ MapReg = 5; }
				case 6://special
					if((MapReg == 6) && (!SpecialFlag)){ MapReg = 7; }
				break;
				case 8:
					if((MapReg == 8) && ((!s['ALL_CLEAR']) || (!nPROLOGU_PATCH)) ){ MapReg = 1; }
				break;
				case 11://extra
					if(s["extra_flag"] == false){ MapReg = 9; }
				break;
				}
				
			}break;
			
		}
	}
	
	
	
	
	
	/*-----------------------------------------
	¡ö ¥«©`¥½¥ëÎ»ÖÃ¥Á¥§¥Ã¥¯
	-----------------------------------------*/
	function CursorPosCheck( cur_x, cur_y )
	{
		/*
		if( nRIGHT_POS < cur_x ){
			
			if( (BgLayer.left - nSCROLL_SPD) < -84 ){
				BgLayer.left = -84;
			}else{
				BgLayer.left -= nSCROLL_SPD;
			}
			
		}
		
		if( cur_x < nLEFT_POS ){
			
			if( 0 < (BgLayer.left + nSCROLL_SPD) ){
				BgLayer.left = 0;
			}else{
				BgLayer.left += nSCROLL_SPD;
			}
			
		}
		*/
		
		if( nBOTTOM_POS < cur_y ){
			
			if( (BgLayer.top - nSCROLL_SPD) < -183 ){
				BgLayer.top = -183;
			}else{
				BgLayer.top -= nSCROLL_SPD;
			}
			
		}
		
		if( cur_y < nTOP_POS){
			
			if( -65 < (BgLayer.top + nSCROLL_SPD) ){
				BgLayer.top = -65;
			}else{
				BgLayer.top += nSCROLL_SPD;
			}
			
		}
		
		
		//
		if(!LoadDataFlag){
			ButtonLayer[1].copyRect(0,0,PartsLayer,114,ButtonLayer[1].height*3,ButtonLayer[1].width,ButtonLayer[1].height);
		}
		
		
		if(!QuickDataFlag){
			ButtonLayer[2].copyRect(0,0,PartsLayer,185,ButtonLayer[2].height*3,ButtonLayer[2].width,ButtonLayer[2].height);
		}
		
	}
	
	
	
	
	/*-----------------------------------------
	¡ö QUICK¸üÐÂ¥Æ¥­¥¹¥È
	-----------------------------------------*/
	function QuickBordText()
	{
		//QUICK¤Î×îÐÂ¤Ï¤Ò¤È¤ÄÇ°
		var new_quick = ((s["quick_number"] - 1) < 0) ? (nSAVE_PAGE_NUM-1) : (s["quick_number"]-1);
		
		//»­Ïñ¸üÐÂ
		var Quickfile = "savedata%03d.bmp".sprintf(nQ_SAVENUM + new_quick);
		QuickThum.loadImages(Quickfile);
		
		//Quick¥Í©`¥à¤È¥Ê¥ó¥Ð©`
		QuickNum.fileCopyRect(0, 0, new FileLayer(MainWnd, PriLayer, "frm_quickname.png"), 0, 0, 75, 25);
		
		QuickNum.fileCopyRect(42, 3, new FileLayer(MainWnd, PriLayer, "frm_qnumber.png"), 0, 20*new_quick, 30, 20);
		
		//TEXT
		var text = s[Quickfile];
		
		//¥Ü©`¥É¤ËÈ¡µÃ¤·¤¿¥Ç©`¥¿¤ò•ø¤­Þz¤à
		MainWnd.DataBordWirte( QuickText, QuickTime, text );
		
	}
	
	
}






/*-----------------------------------------
¡ö Ï÷³ýévÊý
-----------------------------------------*/
function TitleDelete()
{
	//¥ª¥Ö¥¸¥§¥¯¥È¤òÏ÷³ý
	invalidate MainObj.TitleObj;
	
	MainObj.TitleObj = void;
	
	//¥¬¥Ù©`¥¸¤òŠÖÆµÄ¤Ë„Ó¤«¤¹
	System.doCompact();
	
	//´Î¤Î¥¿¥°¤òÈ¡µÃ¤·¤Ë¤¤¤¯
	MainObj.PaserObj.ChageFile("start.ks", false);
}


@endif


.width,ButtonLayer[2].height);
		}
		
	}
	
	
	
	
	/*-----------------------------------------
	â–  QUICKæ›´æ–°ãƒ†ã‚­ã‚¹ãƒˆ
	-----------------------------------------*/
	function QuickBordText()
	{
		//QUICKã®æœ€æ–°ã¯ã²ã¨ã¤å‰
		var new_quick = ((s["quick_number"] - 1) < 0) ? (nSAVE_PAGE_NUM-1) : (s["quick_number"]-1);
		
		//ç”»åƒæ›´æ–°
		var Quickfile = "savedata%03d.bmp".sprintf(nQ_SAVENUM + new_quick);
		QuickThum.loadImages(Quickfile);
		
		//Quickãƒãƒ¼ãƒ ã¨ãƒŠãƒ³ãƒãƒ¼
		QuickNum.fileCopyRect(0, 0, new FileLayer(MainWnd, PriLayer, "frm_quickname.png"), 0, 0, 75, 25);
		
		QuickNum.fileCopyRect(42, 3, new FileLayer(MainWnd, PriLayer, "frm_qnumber.png"), 0, 20*new_quick, 30, 20);
		
		//TEXT
		var text = s[Quickfile];
		
		//ãƒœãƒ¼ãƒ‰ã«å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚€
		MainWnd.DataBordWirte( QuickText, QuickTime, text );
		
	}
	
	
}






/*-----------------------------------------
â–  å‰Šé™¤é–¢æ•°
-----------------------------------------*/
function TitleDelete()
{
	//ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤
	invalidate MainObj.TitleObj;
	
	MainObj.TitleObj = void;
	
	//ã‚¬ãƒ™ãƒ¼ã‚¸ã‚’å¼·åˆ¶çš„ã«å‹•ã‹ã™
	System.doCompact();
	
	//æ¬¡ã®ã‚¿ã‚°ã‚’å–å¾—ã—ã«ã„ã
	MainObj.PaserObj.ChageFile("start.ks", false);
}


@endif


